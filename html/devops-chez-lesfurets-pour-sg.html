<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Continuous delivery chez LesFurets.com</title>
    <meta name="description" content="Continuous delivery chez LesFurets.com">
    <meta name="author" content="Alexandre DuBreuil">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="../bower_components/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../bower_components/reveal.js/lib/css/zenburn.css">
    <link rel="stylesheet" href="../css/lesfurets-theme.css" id="theme">
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]><script src="../bower_components/reveal.js/lib/js/html5shiv.js"></script><![endif]-->
  </head>
  <body>
    <div id="footer" class="footer show">
      <a href="https://www.lesfurets.com" target="_blank"><img class="logo" src="../img/logo_lesfurets_885x128_no_back.png"></a><a class ="github" href="https://github.com/lesfurets" target="_blank">https://github.com/lesfurets</a><a class ="github" href="https://github.com/dubreuia" target="_blank">https://github.com/dubreuia</a><a class="twitter" href="https://twitter.com/BeastieFurets" target="_blank">@BeastieFurets</a><a class="twitter" href="https://twitter.com/dubreuia" target="_blank">@dubreuia</a>
    </div>
    <div class="reveal">
      <div class="slides">
      <!-- SECTION - INTRO -->

      <section class="flushright" data-background="../img/nwx/lesfurets-background-black-01.jpg">
        <h1>Continuous delivery<br/> chez LesFurets.com</h1>
        <h2>Alexandre DuBreuil</h2>
      </section>

      <section class="flushleft"  data-background="../img/nwx/lesfurets-background-black-01.jpg">
        <h2>Alexandre DuBreuil</h2>
        <h3>Tech lead équipe panel assureur</h3>
        <ul class="flushright nodisc">
          <li>
            <a style="color:white" href="https://twitter.com/dubreuia">https://twitter.com/dubreuia</a>
          </li>
          <li>
            <a style="color:white" href="https://github.com/dubreuia">https://github.com/dubreuia</a>
          </li>
        </ul>
      </section>

      <!-- SECTION - DELIVERY -->

      <section class="center" data-background="#222">
        <p>Notre équipe est constitué de <strong>21 développeurs dont 2 ops</strong>.</p>
        <p class="color-gray400">Les développeurs ont des responsabilités devops, telles que la livraison en production, la gestion de la configuration des environnements, le monitoring, etc.</p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <!--
      13 developpeurs : mbe mbo hvi equ ogu jma ebo gbe svi sco jbe luis aar
      5 tech lead : adu sdi bde dra spi
      2 archi : gdu jba
      1 ops : tdb
      -->

      <section class="flushleft" data-background="#eee">
        <h2 style="color:#1a237e">Le delivery chez LesFurets.com</h2>
        <h3 style="color:#333" class="flushright">"On cherche à courir un marathon</br>pas un sprint"</h3>
      </section>

      <section class="flushleft" data-background="#222">
        <p>Notre évolution du delivery en transformation vers du <strong>continuous delivery</strong></p>
        <ul class="color-gray400">
        <li class="color-gray400"><strong>2012</strong> : <span class="color-indigo500">12 releases</span> en sprint scrum mensuel <span class="color-gray">(build 15 minutes et selenium 1 heure)</span></li>
        <li class="color-gray400"><strong>2013</strong> : <span class="color-indigo500">45 releases</span> en sprint scrum hebdo <span class="color-gray">(build 3 minutes, release 1 jour)</span></li>
        <li class="color-gray400"><strong>2014</strong> : <span class="color-indigo500">200+ releases</span> en kanban daily delivery <span class="color-gray">(release 2 heures)</span></li>
        <li class="color-gray400"><strong>2016</strong> : <span class="color-indigo500">300+ releases</span> en kanban one feature release (one click release)</li>
        </ul>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p>On a besoin de certains éléments préalables</p>
        <p class="color-gray400">Un code correctement <strong class="color-gray50">segmenté</strong> (avec des parties indépendantes), une bonne <strong class="color-gray50">couverture de test</strong>, des <strong class="color-gray50">features indépendantes</strong> (donc des branches indépendantes) et une chaine de <strong class="color-gray50">build rapide et automatique</strong> (y compris le déploiement).</p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p class="color-gray400">Normalement, nos 200 tests selenium prendraient <strong>6 heures</strong>. Avec un grid selenium classique, on arrive à <strong>1 heure</strong></p>
        <p>Avec un grid selenium en RAMFS ? <strong class="color-indigo500">10 minutes</strong></p>
        <p>LesFurets <strong>selenium grid</strong> : <br/><a href="https://github.com/lesfurets/selenium-lxc">https://github.com/lesfurets/selenium-lxc</a></p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p>En plus du monitoring technique et métier, on a besoin d'un monitoring UI, LesFurets <strong>Zeno pixel</strong> : <br/><a href="https://github.com/lesfurets/zeno-pixel">https://github.com/lesfurets/zeno-pixel</a></p>
        <img style="width: 100%;" src="../img/devops/zeno-pixel-01.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p>Déploiement blue / green, <span class="color-indigo500">0 downtime</span>, avec HAProxy</p>
        <img src="../img/devops/deployment-blue-green-01.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <!-- SECTION - SOURCE CODE -->

      <section class="flushleft" data-background="#eee">
        <h2 style="color:#1a237e">Source code management</h2>
      </section>

      <section class="center" data-background="#222">
        <p>Trunk based : <span class="color-gray400">tout le code est dans le master, nécessite du feature toogle</span></p>
        <p>Feature branching : <span class="color-gray400">branches individuelles, difficile de faire de l'intégration continue et de gérer les conflits</span></p>
        <p>Github flow : <span class="color-gray400">feature branche avec code review</span></p>
        <p></p>
        <h3 class="fragment"><strong class="color-indigo500">Feature branching + continuous merge</strong></h3>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p>Continuous merge</p>
        <img style="width: 75%;" src="../img/devops/octopus-merge-features-01.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <img style="width: 100%" src="../img/devops/octopus-merge-features-02.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p>Le merge de plusieurs branches avec git :</p>
        <pre><code class="code java" data-trim data-noescape>
git merge features/*
        </code></pre>
        <p class="color-gray400">...n'existe pas, donc on l'a créé</p>
        <p>LesFurets <strong>git-octopus</strong> : <br/><a href="https://github.com/lesfurets/git-octopus">https://github.com/lesfurets/git-octopus</a></p>
        <p class="color-gray400">Mais que se passe-t'il lorsqu'il y a des conflits ?</p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p><code>features/new</code> ne fusionne pas avec <code>features/f2</code></p>
        <img style="width:75%" src="../img/devops/octopus-merge-features-03.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p>Lors de conflit, on a plusieurs solutions de différentes natures :</p>
        <p class="color-gray500">On peut <span class="color-indigo500">enlever la branche</span> (le plus simple), on peut <span class="color-indigo500">éviter le conflit</span> (souvent la solution préférée), on peut utiliser <span class="color-indigo500">git-conflict</span> (livré avec git-octopus) ou on peut <span class="color-deeporange700">fusionner / rebaser les branches en conflit</span> (danger zone).</p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p><strong>git-conflict</strong> (livré avec git-octopus)<br/> est un gestionnaire de conflit reproductible distribué (cool !)</p>
        <img style="width:75%" src="../img/devops/octopus-merge-features-04.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <img style="width:100%;" src="../img/devops/octopus-merge-features-05.png">
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="center" data-background="#222">
        <p class="color-gray400">Les déploiements se font vers plusieurs environnements : <strong>personnel</strong> (la feature courtante), <strong>docker</strong> (une feature en isolé, disponible de l'extérieur), <strong>developpement</strong> (toutes les features), <strong>staging / dog fooding</strong> (validation fonctionnelle), <strong>pre-production</strong> (release de demain) et <strong>production</strong>.</p>
        <p>On utilise l'octopus pour l'environnement de staging (<span class="color-indigo500">octopus-features</span>) et pour l'environnement de preprod (<span class="color-indigo500">octopus-releases</span>).</p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <!-- SECTION - CONCLUSION -->

      <section class="center" data-background="#222">
        <p class="color-gray400">En résumé : le continuous delivery est atteignable pour une équipe de toute taille.</p>
        <p>Il faut y arriver pas à pas, en commençant par le <span class="color-indigo500">continuous merge</span>, qu'on peut mettre en place immédiatement sans impact !</p>
        <aside class="notes">
          <p>TODO</p>
        </aside>
      </section>

      <section class="flushright" data-background="../img/live-code-review/blindard-01.jpeg">
        <h3>Ajoutez git-octopus à votre CI dès maintenant...</h3>
        <h2>FIN</h2>
      </section>

      <!-- END -->
      </div>
    </div>
    <script src="../bower_components/reveal.js/lib/js/head.min.js"></script>
    <script src="../bower_components/reveal.js/js/reveal.js"></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        embedded: true,

        //theme: 'lesfurets', // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: '../bower_components/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../bower_components/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../bower_components/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../bower_components/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '../bower_components/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: '../bower_components/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
    <script src="js/lesfurets-theme.js" async></script>
    <script src="js/lesfurets-codereview-theme.js" async></script>
  </body>
</html>
