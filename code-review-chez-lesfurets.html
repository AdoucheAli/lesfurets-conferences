<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Code review chez LesFurets.com</title>
    <meta name="description" content="Code review chez LesFurets.com">
    <meta name="author" content="Alexandre DuBreuil, Mathieu Bolla">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="bower_components/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="bower_components/reveal.js/lib/css/zenburn.css">
    <link rel="stylesheet" href="css/lesfurets-theme.css" id="theme">
    <link rel="stylesheet" href="css/code-review-theme.css" id="theme">
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]><script src="lib/js/html5shiv.js"></script><![endif]-->
  </head>
  <body>
    <div class="footer">
      <a href="https://www.lesfurets.com" target="_blank"><img class="logo" src="img/logo_lesfurets_885x128_no_back.png"></a><a class ="github" href="https://github.com/lesfurets" target="_blank">https://github.com/lesfurets</a><a class="twitter" href="https://twitter.com/BeastieFurets" target="_blank">@BeastieFurets</a>
    </div>
    <div class="reveal">
      <div class="slides">
      <!-- START -->

      <section class="flushright" data-background="img/nwx/lesfurets-background-black-01.jpg">
        <h1>Code review<br/> chez LesFurets.com</h1>
        <h2>Alexandre DuBreuil</h2>
        <h2>Mathieu Bolla</h2>
      </section>

      <section class="flushleft"  data-background="img/nwx/lesfurets-background-black-01.jpg">
        <h2>Alexandre DuBreuil</h2>
        <h3 class="fragment">Tech lead équipe panel assureur</h3>
        <ul class="flushright nodisc">
          <li class="fragment">
            <a href="https://twitter.com/dubreuia">https://twitter.com/dubreuia</a>
          </li>
          <li class="fragment">
            <a href="https://github.com/dubreuia">https://github.com/dubreuia</a>
          </li>
        </ul>
        <h2>Mathieu Bolla</h2>
        <h3 class="fragment">Développeur backend équipe panel assureur</h3>
        <ul class="flushright nodisc">
          <li class="fragment">
            <a href="https://twitter.com/TODO">https://twitter.com/mathieubolla</a>
          </li>
          <li class="fragment">
            <a href="https://github.com/TODO">https://github.com/mathieubolla</a>
          </li>
        </ul>
      </section>

      <section class="flushleft" data-background="img/nwx/lesfurets-background-black-01.jpg">
        <h1 class="indigo500">LesFurets.com</h1>
        <p class="fragment flushright">1er site indépendant de comparaison d’assurance, lancé en septembre 2012</p>
        <p class="fragment flushright">Un lieu unique pour comparer rapidement des centaines d’offres
        (assurances auto, moto, MRH, santé et emprunteur)</p>
      </section>

      <section class="flushleft">
        <h2>Organisation</h2>
        <p class="fragment">L'équipe de développement est séparé en 4 streams
        ou feature teams, avec 20+ développeurs</p>
        <p class="fragment">Les différents streams sont responsables de la
        <strong class="orange900">qualité</strong> de leur code... <strong
        class="fragment">on n'a pas de QA</strong></p>
        <aside class="notes">
            <p>La qualité est la responsabilité des développeurs</p>
            <p>On a une ceinture de tests unitaires, de tests d'integration et de selenium</p>
            <p>On utilise périodiquement des métriques de qualité pour trouver les endroits a risque dans le code</p>
            <p>Peu de dette technique ou de code legacy</p>
            <p>Utilisation de programmation en paire et de code review systématique</p>
        </aside>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h1 class="indigo700">Linus' law</h1>
        <p class="fragment gray800">"Given enough eyes, all bugs are shallow" <strong class="deeporange900">-Linus Tolvalds</strong></p>
      </section>

      <section class="flushleft" data-background="#eeeeee">
        <h2 class="gray800">Contenu</h2>
        <p class="gray800"><strong>W</strong><span class="fragment">hy</span></p>
        <p class="gray800"><strong>W</strong><span class="fragment">ho</span></p>
        <p class="gray800"><strong>W</strong><span class="fragment">hat</span></p>
        <p class="gray800"><strong>H</strong><span class="fragment">ow</span></p>
        <p class="gray800"><strong>D</strong><span class="fragment">on't</span></p>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h2 class="gray800"><strong>WHY</strong></h2>
        <p class="gray800"><strong class="gray600">Notre définition du pourquoi :</strong> "Construction d'une équipe qui discute sur la qualité. On cherche à créer une culture d'artisants du code (software craftmans)."</p>
      </section>

      <section class="flushleft">
        <!-- TODO add background construction image -->
        <h2 class="flushright"><strong>Construction d'une équipe</strong></h2>
        <p class="fragment">Partage de connaissance</p>
        <p class="fragment">Apprentissage de nouvelles méthodes</p>
        <p class="fragment">Démarre la conversation sur le code</p>
        <p class="fragment">Moyen de prendre du recul</p>
        <aside class="notes">
          <p>Permet le partage de connaissance, à la fois en explication et en compréhension</p>
          <p>Apprendre de nouvelles manière de faire les choses</p>
          <p>Permet souvent de démarrer la conversation sur certaines parties du code / nouveau code / code legacy</p>
          <p>Tout ceci ne peut prendre tout son sens qu'en prenant du recul, et la code review est un bon moment pour ca, au delà du pair</p>
        </aside>
      </section>

      <section class="flushleft">
        <!-- TODO add background documentation image -->
        <h2 class="flushright"><strong>Documentation (implicite ou explicite)</strong></h2>
        <p class="fragment">Forme de documentation commune</p>
        <p class="fragment">Identification des code smells</p>
        <p class="fragment">Base d'argumentaire (style guide)</p>
        <aside class="notes">
          <p>La code review est une forme de documentation commune (explicite ou explicite) : donne des choix, des code smell, des pitfalls, etc.</p>
          <p>Amène a l'identification (implicite ou explicite) de code smells / anti-pattern spécifiques a l'application</p>
          <p>Rédaction d'un style guide commun : base pour l'argumentation</p>
        </aside>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>Code style</strong></h2>
        <p class="fragment flushright">Idéalement automatique : <a class="strong gray900" href="https://github.com/dubreuia/intellij-plugin-save-actions">Intellij Save Action Plugin</a></p>
        <img class="fragment center" style="width:66%" src="img/code-review/code-style-01.png">
        <aside class="notes">
            TODO
        </aside>
      </section>

      <section class="flushleft">
        <!-- TODO add a sonar metric image -->
        <h2 class="flushright"><strong>Qualité</strong></h2>
        <p class="fragment">Auto code review</p>
        <p class="fragment">Intentions explicites</p>
        <p class="fragment">Donner sens aux métriques</p>
        <aside class="notes">
          <p>Plus a même d'écrire du bon code si on sait qu'il sera relu / parler du concept de "auto code review"</p>
          <p>Les intentions doivent être explicites : si le développeur doit expliquer le code, c'est souvent parce qu'il n'est pas explicite</p>
          <p>Donner du sens aux métriques qualités qui sont souvent peu utilisée : nombre de tests / couverture de tests / nombre d'erreurs / temps de correction des erreurs / root cause</p>
        </aside>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h2 class="gray800"><strong>WHO</strong></h2>
        <p class="gray800"><strong class="gray600">Notre définition du qui :</strong> "On cherche a créer une connaissance commune, l'affectation du relecteur n'est pas anodine."</p>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>WHO sont les devs?</strong></h2>
        <p class="fragment">Hervé, le champion</p>
        <p class="fragment">François, le vieux de la vieille</p>
        <p class="fragment">Oleg, fraichement sorti de l'oeuf</p>
        <aside class="notes">
          <p>Hervé: Expert technique, praticien artiste, mais parfois loin du fonctionnel, et un peu trop confiant</p>
          <p>François: Expert métier, connais toutes les ficelles du métier, mais codeur à l'ancienne, parfois un peu rude</p>
          <p>Oleg: Le junior, rempli d'envie d'apprendre, mais n'a pas encore les reflexes, parfois un peu hésitant</p>
        </aside>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>Qualité</strong></h2>
        <p class="fragment">Code "business"</p>
        <p class="fragment">Code "technique"</p>
        <aside class="notes">
          <p>Des développeurs expérimentés fonctionnellement pour les morceaux de code à valeur business ajoutée</p>
          <p>Des développeurs expérimentés techniquement pour des morceaux à valeur architecturale ajoutée</p>
          <p>...</p>
        </aside>
      </section>

      <section class="flushleft">
        <!-- TODO add a link to the pair prog conf -->
        <h2 class="flushright"><strong>Paires</strong></h2>
        <p class="fragment">Paire "expérimenté / débutant"</p>
        <p class="fragment">Paire "développeur fonctionnel / procédural"</p>
        <p class="fragment">Les paires apportent des bénéfices différents</p>
        <p class="fragment">Garder le "coaching" a l'esprit</p>
        <aside class="notes">
          <p>Une paire "expérimenté/débutant" pour former, éduquer</p>
          <p>Une paire "dev fonctionnel / dev procédural" pour former, éduquer, l'un ou l'autre ou les deux</p>
          <p>Toutes les paires sont intéressantes dans leur contexte, et apportent des éléments différents</p>
        </aside>
      </section>

      <section class="flushleft">
        <!-- TODO add a link to the pair prog conf -->
        <h2 class="flushright"><strong>Règles du jeu</strong></h2>
        <p class="fragment">Les relecteurs n'ont pas travaillé sur le code</p>
        <p class="fragment">Le nombre dépend de la criticité du code</p>
        <p class="fragment">Relecteur sélectionnés selon la méthodologie de travail</p>
        <p class="fragment">Parfois relecteur désigé par le développeur</p>
        <p class="fragment">Parfois relecteur externe a l'equipe</p>
        <aside class="notes">
          <p>Les relecteurs n'ont pas travaillés sur le code, et n'ont pas été copilotes (s'il y a développement en binôme)</p>
          <p>Le nombre de relecteur dépend la criticité du code (fonction de la taille et de l'importance du code)</p>
          <p>Les relecteurs sont sélectionnés selon la méthodologie de travail (en Agile lors du planning, en Kanban lorsque quelqu'un se libère, etc.)</p>
          <p>Dans certains cas, un relecteur peut être désigné par le développeur (s'il est expert d'un sujet par exemple)</p>
          <p>Dans certains cas, un relecteur peut être a l'extérieur de l'équipe (idem)</p>
          <p>S'il y a relecteur désigné, il doit y avoir un relecteur choisi "normalement"</p>
        </aside>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h2 class="gray800"><strong>WHAT</strong></h2>
        <p class="gray800"><strong class="gray600">Notre définition du quoi :</strong> "Chaque ligne de code incomprise est une ligne de code ajoutant de la dette technique."</p>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>Tests unitaires</strong></h2>
        <p class="fragment">Tests unitaires nécessaires</p>
        <p class="fragment">Donne le domaine métier du code</p>
        <p class="fragment">Permet de vérifier la couverture</p>
        <aside class="notes">
          <p>Il n'y a pas de revue de code sans tests unitaires : donne la compréhension nécessaire pour le relecteur</p>
          <p>Permet au relecteur de savoir rapidement s'il manque des cas (et en suggérer de nouveaux)</p>
          <p>La revue de code ne trouve pas les mêmes problèmes que les tests unitaires (et inversement)</p>
          <p>Vérifier la couverture de test pour le nouveau code et le code modifié</p>
        </aside>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>Compréhension</strong></h2>
        <p class="fragment">Relire toutes les lignes</p>
        <p class="fragment">Explications sur les lignes incompréhensibles</p>
        <p class="fragment">Refactoring et retours basés sur les incompréhensions</p>
        <aside class="notes">
          <p>Relire toutes les lignes</p>
          <p>Toute ligne incomprehensible / difficile a comprendre, c'est un probleme</p>
          <p>Demander au developpeur d'expliquer les parties difficiles a comprendre </p>
          <p>Ensuite les refactorer basé sur ces commentaires</p>
        </aside>
      </section>

      <section class="flushleft">
        <!-- TODO add examples of code smells and anti patterns -->
        <h2 class="flushright"><strong>Anti-pattern et code smells</strong></h2>
        <p class="fragment">Facile a détecter</p>
        <p class="fragment">Cache souvent des problèmes plus graves</p>
        <p class="fragment">TODO ...</p>
        <aside class="notes">
          <p>Facile de s'entraîner a les détecter rapidement</p>
          <p>Cachent souvent des problèmes plus graves </p>
          <p>Code dupliqué / réécriture d'une librairie existante</p>
          <p>Non respect du style</p>
        </aside>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h2 class="gray800"><strong>HOW</strong></h2>
        <p class="gray800"><strong class="gray600">Notre définition du comment :</strong> "Commencer avec un "crime partner", puis discuter de la discussion issue de la revue de code, pour donner du recul. Étendre graduellement."</p>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h1 class="indigo700">Comment procéder ?</h1>
        <p class="fragment gray800">"Be the change you want to see" <strong class="deeporange900">-Gandhi le relecteur de code</strong></p>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>La recette de mémé relectrice</strong></h2>
        <p class="fragment">Trouver un "partenaire de crime"</p>
        <p class="fragment">Faire une première revue de code</p>
        <p class="fragment">Discuter et valider les hypothèses</p>
        <p class="fragment">Étendre</p>
        <aside class="notes">
          <p>Le plus simple c'est de trouver un ou des "partenaires de crime"</p>
          <p>Discuter avec ces personnes et valider les hypothèses</p>
          <p>Noter les consensus dans un "guide de style"</p>
          <p>Commencer a relire et faire relire a l'extérieur de l'équipe</p>
        </aside>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>Outils</strong></h2>
        <p class="fragment">Prendre ce qui marche pour vous</p>
        <p class="fragment">Commence le plus a poil possible</p>
        <p class="fragment">Un bout de papier suffit (presque)</p>
        <p class="fragment">Mais il faut pouvoir documenter les discussions</p>
        <aside class="notes">
          <p>Prendre ce qui marche pour vous !</p>
          <p>La code review ça peut (presque) se faire sur un bout de
          papier</p>
          <p>L'important c'est la culture de la code review, la discussion qui l'entoure, la relecture, etc.</p>
        </aside>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h2 class="gray800"><strong>DON'T</strong></h2>
        <p class="gray800"><strong class="gray600">Notre définition de ce qu'il ne faut pas faire :</strong> "Se concentrer sur le "quoi" et non sur le "qui" est a la base du partage de connaissance."</p>
      </section>

      <section class="flushleft">
        <h2 class="flushright"><strong>Shame</strong></h2>
        <p class="fragment">Pas de "shame parade"</p>
        <p class="fragment">Pas de réunion de code</p>
        <p class="fragment">Pas de culture orale</p>
        <p class="fragment">Pas de sur-relecture</p>
        <aside class="notes">
          <p>Ne pas faire de "shame parade" (prendre un dev malheureux, et montrer son bout de code fautif dans une salle devant tout le monde. ceci n'est pas de la code review, et ce n'est pas bon)</p>
          <p>Ne pas faire de "code réunion" (genre prendre un maximum de gens et passer un maximum de temps a regarder un petit bout de code parce qu'il est critique. s'il est si critique, alors il est petit et testable) (et puis le viol en réunion est une circonstance aggravante)</p>
          <p>Ne pas faire de code review a l'oral, mais prendre des notes, expliquer pourquoi ca nous questionne, pourquoi on n'est pas d'accord, ne serais-ce que pour avoir une référence au moment de corriger, ou de laisser tomber</p>
          <p>Ne pas passer trop de temps a le faire, ni passer des revues sur des revues qui ne terminent plus, c'est deja assez chronophage : rester pragmatique </p>
        </aside>
      </section>

      <section class="flushright" data-background="#eeeeee">
        <h2 class="gray800"><strong>TODO</strong></h2>
        <p class="gray800"><strong class="gray600"></p>
      </section>

      <!-- END -->
      </div>
    </div>
    <script src="bower_components/reveal.js/lib/js/head.min.js"></script>
    <script src="bower_components/reveal.js/js/reveal.js"></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        embedded: true,

        //theme: 'lesfurets', // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'bower_components/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'bower_components/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'bower_components/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'bower_components/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'bower_components/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'bower_components/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
  </body>
</html>
